<%- contentFor('page_title') %>Transactions

  <%- contentFor('body') %>
    <aside>
      <form class="search-form" action="/search" method="GET">
        <div class="search-box">
          <button><i class="fa fa-search"></i></button>
          <input type="text" name="query" placeholder="Search...">
        </div>
      </form>

      <h3>Filter Records</h3>

      <h4>Categories</h4>
      <h4>Record Types</h4>
      <h4>Amount Range</h4>
      <h4>Date</h4>
    </aside>
    <main>
      <h1>Transactions</h1>
      <div class="content-wrapper">
        <table class="transaction-table">
          <thead>
            <tr>
              <th class="text-left">Category</th>
              <th class="text-left">Date</th>
              <th class="text-right">Amount</th>
              <th class="text-right">Action</th>
            </tr>
          </thead>
          <tbody>
            <% transactions.forEach((transaction)=> { %>
              <tr>
                <td class="transaction-category">
                  <% if (transaction.transaction_type==='expense' ) { %>
                    <% const icon=transaction.category_icon || '/images/default-expense-icon.svg' ; %>
                      <img src="<%= icon %>" alt="<%= transaction.category_name %>">
                      <%= transaction.category_name %>
                        <% } else { %>
                          <% const icon=transaction.category_icon || '/images/default-income-icon.svg' ; %>
                            <img src="<%= icon %>" alt="<%= transaction.category_name %>">
                            <%= transaction.category_name %>
                              <% } %>
                </td>
                <td>
                  <%= new Date(transaction.date).toLocaleDateString() %>
                </td>
                <td
                  class="text-right text-medium <%= transaction.transaction_type === 'expense' ? 'text-danger' : 'text-success' %>">
                  $<%= transaction.amount %>
                </td>
                <td class="action-buttons text-right">
                  <button class="action-button text-primary" title="View"><i class="fa fa-eye"></i></button>
                  <button class="action-button text-primary" title="Edit"><i class="fa fa-edit"></i></button>
                  <form action="/transactions/?id=<%= transaction.id %>" method="post">
                    <input type="hidden" name="_method" value="DELETE">
                    <button class="action-button text-danger" title="Delete"><i class="fa fa-trash"></i></button>
                  </form>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
      </div>
    </main>